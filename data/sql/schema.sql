CREATE TABLE gts_address (id INT UNSIGNED AUTO_INCREMENT, address_type SMALLINT NOT NULL, member_id BIGINT, flat_no VARCHAR(255), premises VARCHAR(255), street VARCHAR(255), area VARCHAR(255), city VARCHAR(255), state VARCHAR(20), country VARCHAR(20), pin VARCHAR(20), INDEX member_id_idx (member_id), PRIMARY KEY(id)) ENGINE = INNODB;
CREATE TABLE gts_application (id INT UNSIGNED AUTO_INCREMENT, member_type_id SMALLINT UNSIGNED, status TINYINT, title VARCHAR(6), first_name VARCHAR(20), last_name VARCHAR(20), email_address VARCHAR(80), submission_id BIGINT, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, INDEX member_type_id_idx (member_type_id), PRIMARY KEY(id)) ENGINE = INNODB;
CREATE TABLE gts_contact (id INT UNSIGNED AUTO_INCREMENT, contact_type SMALLINT NOT NULL, member_id BIGINT, country VARCHAR(20), isd_code VARCHAR(10), std_code VARCHAR(10), contact_text VARCHAR(150), first_name VARCHAR(255), last_name VARCHAR(255), dob DATE, relation SMALLINT, INDEX gts_contact_contact_type_idx (contact_type), INDEX member_id_idx (member_id), PRIMARY KEY(id)) ENGINE = INNODB;
CREATE TABLE gts_country (country_code VARCHAR(6) UNIQUE, disabled TINYINT(1) DEFAULT '0' NOT NULL, PRIMARY KEY(country_code)) ENGINE = INNODB;
CREATE TABLE gts_contact (id INT UNSIGNED AUTO_INCREMENT, contact_type SMALLINT NOT NULL, member_id BIGINT, country VARCHAR(20), isd_code VARCHAR(10), std_code VARCHAR(10), contact_text VARCHAR(150), first_name VARCHAR(255), last_name VARCHAR(255), dob DATE, relation SMALLINT, INDEX member_id_idx (member_id), PRIMARY KEY(id)) ENGINE = INNODB;
CREATE TABLE gts_form_question (id INT UNSIGNED AUTO_INCREMENT, answer_type TINYINT UNSIGNED NOT NULL, question_text TEXT NOT NULL, help_message TEXT, parent_question_id INT UNSIGNED, disabled TINYINT(1) DEFAULT '0' NOT NULL, form_id INT UNSIGNED, mandatory TINYINT(1) DEFAULT '0' NOT NULL, group_code VARCHAR(20), display_order SMALLINT UNSIGNED, css_class VARCHAR(30), page_num SMALLINT, date_min_year INT, date_max_year INT, error_msg VARCHAR(255), INDEX parent_question_id_idx (parent_question_id), INDEX form_id_idx (form_id), PRIMARY KEY(id)) ENGINE = INNODB;
CREATE TABLE gts_formquestion_option (id INT UNSIGNED AUTO_INCREMENT, question_id INT UNSIGNED, option_value VARCHAR(45) NOT NULL, option_text TEXT NOT NULL, pre_selected TINYINT(1) DEFAULT '0' NOT NULL, display_order TINYINT DEFAULT 0 NOT NULL, INDEX question_id_idx (question_id), PRIMARY KEY(id)) ENGINE = INNODB;
CREATE TABLE gts_sf_guard_user (id BIGINT AUTO_INCREMENT, first_name VARCHAR(255), last_name VARCHAR(255), email_address VARCHAR(255) NOT NULL UNIQUE, username VARCHAR(128) NOT NULL UNIQUE, algorithm VARCHAR(128) DEFAULT 'sha1' NOT NULL, salt VARCHAR(128), password VARCHAR(128), is_active TINYINT(1) DEFAULT '1', is_super_admin TINYINT(1) DEFAULT '0', last_login DATETIME, is_member TINYINT, member_type_id SMALLINT UNSIGNED, country VARCHAR(6), timezone VARCHAR(255), culture VARCHAR(255), middle_name VARCHAR(40), dob DATE, passport_no VARCHAR(30), pan_no VARCHAR(12), occupation_type SMALLINT, job_title VARCHAR(30), industry VARCHAR(30), other_income_source VARCHAR(30), married TINYINT(1), gender VARCHAR(255), marriage_anniversary DATE, year_as_nri SMALLINT, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, INDEX is_active_idx_idx (is_active), INDEX member_type_id_idx (member_type_id), PRIMARY KEY(id)) ENGINE = INNODB;
CREATE TABLE gts_member_type (id SMALLINT UNSIGNED AUTO_INCREMENT, type_name VARCHAR(45) NOT NULL UNIQUE, description VARCHAR(255), PRIMARY KEY(id)) ENGINE = INNODB;
CREATE TABLE gts_question (id INT UNSIGNED AUTO_INCREMENT, answer_type TINYINT UNSIGNED NOT NULL, question_text TEXT NOT NULL, help_message TEXT, parent_question_id INT UNSIGNED, disabled TINYINT(1) DEFAULT '0' NOT NULL, INDEX parent_question_id_idx (parent_question_id), PRIMARY KEY(id)) ENGINE = INNODB;
CREATE TABLE gts_sf_guard_forgot_password (id BIGINT AUTO_INCREMENT, user_id BIGINT NOT NULL, unique_key VARCHAR(255), expires_at DATETIME NOT NULL, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, INDEX user_id_idx (user_id), PRIMARY KEY(id)) ENGINE = INNODB;
CREATE TABLE gts_sf_guard_group (id BIGINT AUTO_INCREMENT, name VARCHAR(255) UNIQUE, description TEXT, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, PRIMARY KEY(id)) ENGINE = INNODB;
CREATE TABLE gts_sf_guard_group_permission (group_id BIGINT, permission_id BIGINT, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, PRIMARY KEY(group_id, permission_id)) ENGINE = INNODB;
CREATE TABLE gts_sf_guard_permission (id BIGINT AUTO_INCREMENT, name VARCHAR(255) UNIQUE, description TEXT, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, PRIMARY KEY(id)) ENGINE = INNODB;
CREATE TABLE gts_sf_guard_remember_key (id BIGINT AUTO_INCREMENT, user_id BIGINT, remember_key VARCHAR(32), ip_address VARCHAR(50), created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, INDEX user_id_idx (user_id), PRIMARY KEY(id)) ENGINE = INNODB;
CREATE TABLE gts_sf_guard_user (id BIGINT AUTO_INCREMENT, first_name VARCHAR(255), last_name VARCHAR(255), email_address VARCHAR(255) NOT NULL UNIQUE, username VARCHAR(128) NOT NULL UNIQUE, algorithm VARCHAR(128) DEFAULT 'sha1' NOT NULL, salt VARCHAR(128), password VARCHAR(128), is_active TINYINT(1) DEFAULT '1', is_super_admin TINYINT(1) DEFAULT '0', last_login DATETIME, is_member TINYINT, member_type_id SMALLINT UNSIGNED, country VARCHAR(6), timezone VARCHAR(255), culture VARCHAR(255), middle_name VARCHAR(40), dob DATE, passport_no VARCHAR(30), pan_no VARCHAR(12), occupation_type SMALLINT, job_title VARCHAR(30), industry VARCHAR(30), other_income_source VARCHAR(30), married TINYINT(1), gender VARCHAR(255), marriage_anniversary DATE, year_as_nri SMALLINT, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, INDEX is_active_idx_idx (is_active), INDEX gts_sf_guard_user_is_member_idx (is_member), PRIMARY KEY(id)) ENGINE = INNODB;
CREATE TABLE gts_sf_guard_user_group (user_id BIGINT, group_id BIGINT, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, PRIMARY KEY(user_id, group_id)) ENGINE = INNODB;
CREATE TABLE gts_sf_guard_user_permission (user_id BIGINT, permission_id BIGINT, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, PRIMARY KEY(user_id, permission_id)) ENGINE = INNODB;
CREATE TABLE gts_submission (id BIGINT UNSIGNED AUTO_INCREMENT, form_id INT UNSIGNED, user_id BIGINT, submission_ip BIGINT, archieved TINYINT(1) DEFAULT '0' NOT NULL, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, INDEX user_id_idx (user_id), INDEX form_id_idx (form_id), PRIMARY KEY(id)) ENGINE = INNODB;
CREATE TABLE gts_submission_data (id BIGINT UNSIGNED AUTO_INCREMENT, submission_id BIGINT UNSIGNED NOT NULL, question_id INT UNSIGNED, answser_text TEXT, selected_options TEXT, answer_files TEXT, INDEX submission_id_idx (submission_id), INDEX question_id_idx (question_id), PRIMARY KEY(id)) ENGINE = INNODB;
CREATE TABLE gts_submission_form (id INT UNSIGNED AUTO_INCREMENT, form_code VARCHAR(40), form_name VARCHAR(100) NOT NULL, disabled TINYINT(1) DEFAULT '0' NOT NULL, frequency SMALLINT DEFAULT 0 NOT NULL, send_reminder TINYINT(1), form_description TEXT, template_name VARCHAR(40), PRIMARY KEY(id)) ENGINE = INNODB;
ALTER TABLE gts_address ADD CONSTRAINT gts_address_member_id_gts_sf_guard_user_id FOREIGN KEY (member_id) REFERENCES gts_sf_guard_user(id) ON DELETE CASCADE;
ALTER TABLE gts_application ADD CONSTRAINT gts_application_member_type_id_gts_member_type_id FOREIGN KEY (member_type_id) REFERENCES gts_member_type(id) ON UPDATE CASCADE ON DELETE SET NULL;
ALTER TABLE gts_contact ADD CONSTRAINT gts_contact_member_id_gts_sf_guard_user_id FOREIGN KEY (member_id) REFERENCES gts_sf_guard_user(id) ON DELETE CASCADE;
ALTER TABLE gts_form_question ADD CONSTRAINT gts_form_question_parent_question_id_gts_question_id FOREIGN KEY (parent_question_id) REFERENCES gts_question(id) ON UPDATE CASCADE ON DELETE SET NULL;
ALTER TABLE gts_form_question ADD CONSTRAINT gts_form_question_form_id_gts_submission_form_id FOREIGN KEY (form_id) REFERENCES gts_submission_form(id) ON UPDATE CASCADE ON DELETE CASCADE;
ALTER TABLE gts_formquestion_option ADD CONSTRAINT gts_formquestion_option_question_id_gts_form_question_id FOREIGN KEY (question_id) REFERENCES gts_form_question(id) ON UPDATE CASCADE ON DELETE CASCADE;
ALTER TABLE gts_sf_guard_user ADD CONSTRAINT gts_sf_guard_user_member_type_id_gts_member_type_id FOREIGN KEY (member_type_id) REFERENCES gts_member_type(id) ON UPDATE CASCADE ON DELETE SET NULL;
ALTER TABLE gts_question ADD CONSTRAINT gts_question_parent_question_id_gts_question_id FOREIGN KEY (parent_question_id) REFERENCES gts_question(id) ON UPDATE CASCADE ON DELETE SET NULL;
ALTER TABLE gts_sf_guard_forgot_password ADD CONSTRAINT gts_sf_guard_forgot_password_user_id_gts_sf_guard_user_id FOREIGN KEY (user_id) REFERENCES gts_sf_guard_user(id) ON DELETE CASCADE;
ALTER TABLE gts_sf_guard_group_permission ADD CONSTRAINT gts_sf_guard_group_permission_group_id_gts_sf_guard_group_id FOREIGN KEY (group_id) REFERENCES gts_sf_guard_group(id) ON DELETE CASCADE;
ALTER TABLE gts_sf_guard_group_permission ADD CONSTRAINT gpgi FOREIGN KEY (permission_id) REFERENCES gts_sf_guard_permission(id) ON DELETE CASCADE;
ALTER TABLE gts_sf_guard_remember_key ADD CONSTRAINT gts_sf_guard_remember_key_user_id_gts_sf_guard_user_id FOREIGN KEY (user_id) REFERENCES gts_sf_guard_user(id) ON DELETE CASCADE;
ALTER TABLE gts_sf_guard_user_group ADD CONSTRAINT gts_sf_guard_user_group_user_id_gts_sf_guard_user_id FOREIGN KEY (user_id) REFERENCES gts_sf_guard_user(id) ON DELETE CASCADE;
ALTER TABLE gts_sf_guard_user_group ADD CONSTRAINT gts_sf_guard_user_group_group_id_gts_sf_guard_group_id FOREIGN KEY (group_id) REFERENCES gts_sf_guard_group(id) ON DELETE CASCADE;
ALTER TABLE gts_sf_guard_user_permission ADD CONSTRAINT gts_sf_guard_user_permission_user_id_gts_sf_guard_user_id FOREIGN KEY (user_id) REFERENCES gts_sf_guard_user(id) ON DELETE CASCADE;
ALTER TABLE gts_sf_guard_user_permission ADD CONSTRAINT gpgi_1 FOREIGN KEY (permission_id) REFERENCES gts_sf_guard_permission(id) ON DELETE CASCADE;
ALTER TABLE gts_submission ADD CONSTRAINT gts_submission_user_id_gts_sf_guard_user_id FOREIGN KEY (user_id) REFERENCES gts_sf_guard_user(id) ON UPDATE CASCADE ON DELETE SET NULL;
ALTER TABLE gts_submission ADD CONSTRAINT gts_submission_form_id_gts_submission_form_id FOREIGN KEY (form_id) REFERENCES gts_submission_form(id) ON UPDATE CASCADE ON DELETE SET NULL;
ALTER TABLE gts_submission_data ADD CONSTRAINT gts_submission_data_submission_id_gts_submission_id FOREIGN KEY (submission_id) REFERENCES gts_submission(id) ON UPDATE CASCADE ON DELETE CASCADE;
ALTER TABLE gts_submission_data ADD CONSTRAINT gts_submission_data_question_id_gts_form_question_id FOREIGN KEY (question_id) REFERENCES gts_form_question(id) ON UPDATE CASCADE ON DELETE SET NULL;
